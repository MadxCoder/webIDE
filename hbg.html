<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="hbgstyle.css">
  <link rel="stylesheet" href="https://code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">

  <title>HTML Playground</title>
</head>
<body>
  <nav class="cf">
    <ul class="cf">
      <li>
        <a href="index.html">Programming</a>
      </li>
      <li class="WIPH">
        <a href="#">What is Programming</a>
      </li>
      <li class="WPH">
        <a href="#">Why Programming</a>
      </li>
      <li>
        <a href="#">Languages</a>
      </li>
      <li id="sign" >
        <a href="signin.html"></a>
      </li>
    </ul>
    <a href="#" id="openup">MENU</a>
  </nav>
  <div class="IDE">
    <input type="text" id="filename" placeholder="Enter file name">
    <button id="uploader">upload</button>
    <button id="download">GET Code</button>
    <div id="modal" class="modal">
    <span class="close">×</span>
    <span id="filepicker">

    </span>
  </div>
  <div id="Errormodal" class="modal">
  <span class="close">×</span>
  <span id="filepicker">

  </span>
</div>
  <div class="code" >
    <div class="html" id="draggable">
      <div class="header" id="htmlheader" ><p>HTML</p></div>
      <div class="editor" id="editor">
      </div>
  </div>
  <div class="css" id="draggable">
    <div class="header" id="cssheader"><p>CSS</p></div>
    <div class="editor" id="editorcss">
    </div>
</div>
  <div class="js" id="draggable">
    <div class="header" id="jsheader"><p>JS</p></div>
    <div class="editor" id="editorjs">
    </div>
  </div>
</div>
</div>
<div class="frame">
<iframe id="iframe"></iframe>
<div ></div>
<style>
  /*#draggable{
    width: 200px;
    height: 200px;
    background-color: white;
  }*/
</style>

<script src="firebase.js"></script>
<script src="database.js"></script>
<script src="jquery.js"></script>
<script src="edit.js"></script>
<script src="main.js"></script>
<script src="ace-builds-master/src-noconflict/ace.js" type="text/javascript" charset="utf-8"></script>
<script src="ace-builds-master/src-noconflict/ext-emmet.js" type="text/javascript" charset="utf-8"></script>
<script src="emmet-core-master/emmet.js" type="text/javascript" charset="utf-8"></script>
<script src="ace-builds-master/src-noconflict/ext-language_tools.js" type="text/javascript" charset="utf-8"></script>
<script>
setupEditor();
update();

/*var database = firebase.database().ref().child('posts');
var filepick = document.getElementById('filepick');
var database = firebase.database().ref().child('posts');
var filepicker = document.getElementById('filepicker');
var txt = document.getElementById('txt');
var modal = document.getElementById('modal');
database.on("child_added", snap=> {
  var newPost = snap.val().name;
  var li = document.createElement('li');
  filepicker.appendChild(li);
  var filepick = document.getElementById('filepick');
    //li.innerHTML = '<a href = "'+snap.val().url+'">hi</a>';
//txt.placeholder = https://firebasestorage.googleapis.com/v0/b/code-database.appspot.com/o/html%2Fhi?alt=media&token=9a8a01c7-0566-4044-8afe-4b7c46ceedd2;
    li.innerHTML = /*'<a href = "'+snap.val().url+'">'+snap.val().name/*+'</a>';
  //console.log(newPost);
  //var idoc = document.getElementById('iframe');
 //idoc.src = "https://firebasestorage.googleapis.com/v0/b/code-database.appspot.com/o/html%2Fhi?alt=media&token=5b82aef8-bfa4-4d36-858d-031d32b22846";
  //var idoccont = window.frames[0].document;
  //var blob = idoccont;
//console.log(window.frames[0].document.head.innerHTML);
//console.log(typeof idoccont);
//console.log(JSON.stringify(blob));
  /*const reader = new FileReader();

  reader.addEventListener('loadend', (e) => {
    const text = this.result;
    console.log(text);
      editor.session.setValue (blob);
  });
  reader.readAsText(blob);
  //console.log(idoccont);
//  editor.setValue("");*/
/*var storage = firebase.storage().refFromURL('https://firebasestorage.googleapis.com/v0/b/code-database.appspot.com/o/html%2Fhi?alt=media&token=9a8a01c7-0566-4044-8afe-4b7c46ceedd2');
console.log(storage);
// This can be downloaded directly:
var xhr = new XMLHttpRequest();
xhr.responseType = 'blob';
xhr.onload = function(event) {
  var blob = xhr.response;

  const reader = new FileReader();
  reader.readAsText(blob);
  reader.addEventListener('loadend', (e) => {
    const text = e.srcElement.result;
    console.log(text);
      editor.session.setValue (blob);
  });
};
xhr.open('GET', storage);
xhr.send();
/*const reader = new FileReader();
reader.readAsText(blob);
reader.addEventListener('loadend', (e) => {
  const text = e.srcElement.result;
  console.log(text);
    editor.session.setValue (blob);
  });*//*
})*/



/*database.on('value', snap=>{
  var nar = JSON.stringify(snap.val() , null ,3).name;
  console.log(nar)
  var childnum = snap.numChildren();
  JSON.stringify(snap.val);
});*/

</script>
<script src="https://code.jquery.com/jquery-1.12.4.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>

<script src="jquery-ui.js"></script>
<script src="hbg.js"></script>
</div>
</body>
</html>
